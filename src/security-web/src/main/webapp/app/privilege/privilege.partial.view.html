<div class="block--scrollable">
    <input id="anchor-privileges" class="form-control" ng-model="filterText" placeholder="Search privileges...">
    <ul ng-repeat="objectType in objectTypes | filter:{objectTypeName: filterText}"
        ng-init="isCollapsed = true" ng-click="isCollapsed = !isCollapsed"
        class="list--compact list-unstyled text--unselectable">
        <li class="list--compact__collapse">
            <span class="glyphicon" ng-class="{'glyphicon-collapse-down' : isCollapsed, 'glyphicon-collapse-up' : !isCollapsed}"></span>
            <span class="text-info"> {{objectType.objectTypeName}}</span>
            [<span ng-repeat="action in objectType.actions | filter:{privilege:{checked: true}}">{{action.name}}{{$last ? '' : ', '}}</span>]
        </li>
        <li uib-collapse="isCollapsed">
            <ul class="list-unstyled">
                <li ng-repeat="action in objectType.actions" ng-click="action.privilege.checked = !action.privilege.checked; $event.stopPropagation();">
                    <input type="checkbox" ng-model="action.privilege.checked" ng-click="$event.stopPropagation();">
                    {{action.name}}
                </li>
            </ul>
        </li>
    </ul>
</div>